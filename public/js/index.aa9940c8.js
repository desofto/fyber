(function(t){function e(e){for(var n,s,i=e[0],l=e[1],u=e[2],p=0,d=[];p<i.length;p++)s=i[p],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);c&&c(e);while(d.length)d.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,i=1;i<r.length;i++){var l=r[i];0!==o[l]&&(n=!1)}n&&(a.splice(e--,1),t=s(s.s=r[0]))}return t}var n={},o={index:0},a=[];function s(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=n,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(r,n,function(e){return t[e]}.bind(null,n));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var c=l;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("c404")},1:function(t,e){},c404:function(t,e,r){"use strict";r.r(e);r("4de4"),r("ac1f"),r("5319"),r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),o=(r("ab8b"),r("28dd"));n["a"].prototype.$globals=new n["a"]({data:{currentUser:{token:localStorage.getItem("current-user-token")}}});var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Auth"),t.currentUser.token?r("Messages"):t._e()],1)},s=[],i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.currentUser.token?r("div",[r("div",{staticClass:"d-flex justify-content-end align-items-center pt-3 pr-3"},[r("div",{staticClass:"mr-3"},[r("Timezone")],1),r("div",[r("Logout")],1)])]):r("div",[r("div",{staticClass:"d-flex"},[r("div",{staticClass:"d-flex",staticStyle:{width:"50%"}},[r("Login",{staticClass:"m-auto"})],1),r("div",{staticClass:"d-flex",staticStyle:{width:"50%"}},[r("Signup",{staticClass:"m-auto"})],1)])])])},l=[],u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"p-4"},[r("div",{staticClass:"form-group mb-3"},[r("label",[t._v("Email:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),r("div",{staticClass:"form-group mb-3"},[r("label",[t._v("Password:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.login()}}},[t._v(" Login ")])])])},c=[],p={data:function(){return{email:"",password:""}},methods:{login:function(){var t=this;this.$http.post("/api/v1/users",{email:this.email,password:this.password}).then((function(e){t.$globals.currentUser.token=e.body.token,localStorage.setItem("current-user-token",e.body.token)}),(function(t){alert(t.body.errors)}))}}},d=p,m=r("2877"),v=Object(m["a"])(d,u,c,!1,null,"df956e18",null),f=v.exports,g=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"p-4"},[r("div",{staticClass:"form-group mb-3"},[r("label",[t._v("Email:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),r("div",{staticClass:"form-group mb-3"},[r("label",[t._v("Password:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),r("div",{staticClass:"form-group mb-3"},[r("label",[t._v("Time zone:")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.timeZone,expression:"timeZone"}],staticClass:"form-control",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.timeZone=e.target.multiple?r:r[0]}}},t._l(t.timeZones,(function(e,n){return r("option",{key:n,domProps:{value:n}},[t._v(" "+t._s(e)+" ")])})),0)]),r("div",{staticClass:"form-group mb-3"},[r("label",[t._v("Group:")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.groupId,expression:"groupId"}],staticClass:"form-control",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.groupId=e.target.multiple?r:r[0]}}},[r("option",{domProps:{value:null}},[t._v(" no group ")]),t._l(t.groups,(function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])}))],2)]),t.groupId?t._e():r("div",{staticClass:"form-group mb-3"},[r("label",[t._v("Group:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.groupName,expression:"groupName"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.groupName},on:{input:function(e){e.target.composing||(t.groupName=e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.signup()}}},[t._v(" Signup ")])])])},h=[],b={"-12":"-12","-11":"-11","-10":"-10","-9":"-9","-8":"-8","-7":"-7","-6":"-6","-5":"-5","-4":"-4","-3":"-3","-2":"-2","-1":"-1",0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},_={data:function(){return{email:"",password:"",timeZone:0,groupId:null,groupName:null,groups:[],timeZones:b}},mounted:function(){var t=this;this.$http.get("/api/v1/groups").then((function(e){t.groups=e.body}),(function(t){alert(t.body)}))},methods:{signup:function(){this.$http.post("/api/v1/users/signup",{email:this.email,password:this.password,time_zone:this.timeZone,group_id:this.groupId,group_name:this.groupName}).then((function(){alert("Registered. Please login now.")}),(function(t){alert(t.body.errors)}))}}},y=_,w=Object(m["a"])(y,g,h,!1,null,"49dac6ae",null),x=w.exports,C=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.me?r("div",{staticClass:"d-flex text-nowrap align-items-center"},[r("label",{staticClass:"mr-2 mb-0"},[t._v("Time zone:")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.me.time_zone,expression:"me.time_zone"}],staticClass:"form-control",on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.me,"time_zone",e.target.multiple?r:r[0])},function(e){return t.update()}]}},t._l(t.timeZones,(function(e,n){return r("option",{key:n,domProps:{value:n}},[t._v(" "+t._s(e)+" ")])})),0)]):t._e()},k=[],$={data:function(){return{timeZones:b,me:null}},mounted:function(){var t=this;this.$http.get("/api/v1/users/me?token=".concat(this.$globals.currentUser.token)).then((function(e){t.me=e.body}),(function(t){alert(t.body.errors)}))},methods:{update:function(){this.$http.post("/api/v1/users/me?token=".concat(this.$globals.currentUser.token),{time_zone:this.me.time_zone}).then((function(){}),(function(t){alert(t.body.errors)}))}}},P=$,N=Object(m["a"])(P,C,k,!1,null,"74ccbd32",null),O=N.exports,I=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"d-flex justify-content-end"},[r("button",{staticClass:"btn btn-light",on:{click:function(e){return t.logout()}}},[t._v(" Logout ")])])},S=[],j={data:function(){return{}},methods:{logout:function(){var t=this;this.$http.post("/api/v1/users/logout",{token:this.$globals.currentUser.token}).then((function(){t.$globals.currentUser.token="",localStorage.setItem("current-user-token","")}),(function(t){alert(t.body.errors)}))}}},M=j,U=Object(m["a"])(M,I,S,!1,null,"039a267c",null),A=U.exports,z={data:function(){return{}},computed:{currentUser:function(){return this.$globals.currentUser}},methods:{logout:function(){var t=this;this.$http.post("/api/v1/users/logout",{token:this.$globals.currentUser.token}).then((function(){t.$globals.currentUser.token="",localStorage.setItem("current-user-token","")}),(function(t){alert(t.body.errors)}))}},components:{Login:f,Signup:x,Timezone:O,Logout:A}},E=z,T=Object(m["a"])(E,i,l,!1,null,"3e973ac4",null),Z=T.exports,J=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("List",{staticClass:"mb-4"}),r("New")],1)},L=[],D=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"p-3"},t._l(t.messages,(function(e){return r("div",{key:e.id,staticClass:"p-3"},[r("div",{staticClass:"border-bottom pb-3"},[t._v(" "+t._s(e.text)+" ")]),r("div",{staticClass:"d-flex pt-1 small text-black-50"},[r("div",{staticClass:"flex-grow-1"},[t._v(" "+t._s(e.sender.email)+" ")]),r("div",{staticClass:"mr-3",attrs:{title:"In browser Time zone"}},[t._v(" "+t._s(t._f("date")(e.created_at,"%Y-%m-%d %H:%M:%S"))+" ")]),r("div",{attrs:{title:"In selected Time zone"}},[t._v(" "+t._s(e.created_at_formatted)+" ")])])])})),0)},F=[],H={data:function(){return{messages:[]}},mounted:function(){var t=this;this.$http.get("/api/v1/messages?token=".concat(this.$globals.currentUser.token)).then((function(e){t.messages=e.body}),(function(t){alert(t.body.errors)}))}},Y=H,G=Object(m["a"])(Y,D,F,!1,null,"70c56ba6",null),B=G.exports,R=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"p-3 bg-light"},[r("div",{staticClass:"form-group mb-3"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"form-control",domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}})]),r("div",{staticClass:"form-group mb-3"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.userId,expression:"userId"}],staticClass:"form-control",staticStyle:{"max-width":"20em"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.userId=e.target.multiple?r:r[0]}}},[r("option",{domProps:{value:null}},[t._v(" no user selected ")]),t._l(t.users,(function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.email)+" ")])}))],2)]),r("div",{staticClass:"form-group mb-3"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.groupId,expression:"groupId"}],staticClass:"form-control",staticStyle:{"max-width":"20em"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.groupId=e.target.multiple?r:r[0]}}},[r("option",{domProps:{value:null}},[t._v(" no group selected ")]),t._l(t.groups,(function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])}))],2)]),r("div",{staticClass:"form-group"},[r("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.post()}}},[t._v(" Post ")])])])},q=[],K={data:function(){return{text:"",userId:null,groupId:null,users:[],groups:[]}},mounted:function(){var t=this;this.$http.get("/api/v1/groups?token=".concat(this.$globals.currentUser.token)).then((function(e){t.groups=e.body}),(function(t){alert(t.body.errors)})),this.$http.get("/api/v1/users?token=".concat(this.$globals.currentUser.token)).then((function(e){t.users=e.body}),(function(t){alert(t.body.errors)}))},methods:{post:function(){var t=this;this.$http.post("/api/v1/messages?token=".concat(this.$globals.currentUser.token),{text:this.text,user_id:this.userId,group_id:this.groupId}).then((function(){t.text="",alert("sent")}),(function(t){alert(t.body.errors)}))}}},Q=K,V=Object(m["a"])(Q,R,q,!1,null,"03eaa15e",null),W=V.exports,X={data:function(){return{}},components:{List:B,New:W}},tt=X,et=Object(m["a"])(tt,J,L,!1,null,"b3ff19ac",null),rt=et.exports,nt={data:function(){return{}},computed:{currentUser:function(){return this.$globals.currentUser}},components:{Auth:Z,Messages:rt}},ot=nt,at=Object(m["a"])(ot,a,s,!1,null,null,null),st=at.exports;function it(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!t)return"";var r=new Date(isNaN(t)?t:1e3*t);if(!r.getTime())return t;var n=["January","February","March","April","May","June","July","August","September","October","November","December"],o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";t=String(t);while(t.length<e)t=r+t;return t}return e=e.replace(/%Y/,r.getFullYear()),e=e.replace(/%y/,r.getFullYear()%100),e=e.replace(/%B/,n[r.getMonth()]),e=e.replace(/%b/,o[r.getMonth()]),e=e.replace(/%m/,a(r.getMonth()+1,2)),e=e.replace(/%_m/,a(r.getMonth()+1,2," ")),e=e.replace(/%-m/,r.getMonth()+1),e=e.replace(/%d/,a(r.getDate(),2)),e=e.replace(/%e/,a(r.getDate(),2," ")),e=e.replace(/%-d/,r.getDate()),e=e.replace(/%H/,a(r.getHours(),2)),e=e.replace(/%k/,a(r.getHours(),2," ")),e=e.replace(/%M/,a(r.getMinutes(),2)),e=e.replace(/%S/,a(r.getSeconds(),2)),e}n["a"].use(o["a"]),n["a"].http.headers.common["Access-Control-Allow-Origin"]="*",n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(st)}}).$mount("#app"),n["a"].filter("date",it)}});
//# sourceMappingURL=index.aa9940c8.js.map